var drupal=drupal||{};
(function(b){drupal.api=function(){this.url="http://rest";this.endpoint="rest";this.resource=""};drupal.api.prototype.getURL=function(a){var b=this.url;b+=this.endpoint?"/"+this.endpoint:"";b+=this.resource?"/"+this.resource:"";b+=a.id?"/"+a.id:"";return b};drupal.api.prototype.call=function(a,c,d,e,f){a={url:a,dataType:c,type:d,success:function(a,b){b=="success"?f(a):console.log("Error: "+b)},error:function(a){console.log(a.responseText);f(null)}};e&&(a.data=e);b.ajax(a)};drupal.api.prototype.get=function(a,
b,d){a=this.getURL(a);a+=".jsonp";a+=b?"?"+decodeURIComponent(jQuery.param(b,true)):"";this.call(a,"jsonp","GET",null,d)};drupal.api.prototype.save=function(a,b){var d=a.id?"PUT":"POST";this.call(this.getURL(a),"json",d,a,b)};drupal.api.prototype.remove=function(a,b){this.call(this.getURL(a),"json","DELETE",null,b)}})(jQuery);drupal=drupal||{};
(function(){drupal.entity=function(b,a){this.id="";this.api=this.api||null;this.update(b);a&&this.get(a)};drupal.entity.prototype.find=function(){};drupal.entity.prototype.get=function(b){if(this.api){var a=this;this.api.get(this.getObject(),this.getQuery(),function(c){c[0]?b(c):(a.update(c),b(a))})}};drupal.entity.prototype.save=function(b){if(this.api){var a=this;this.api.save(this.getObject(),function(c){a.update(c);b(a)})}};drupal.entity.prototype.remove=function(b){this.id&&this.api.remove(this.getObject(),
b)};drupal.entity.prototype.getQuery=function(){var b={};if(!this.id)for(var a in this)this.hasOwnProperty(a)&&this[a]&&typeof this[a]!="object"&&(b["parameters["+a+"]"]=this[a]);return b};drupal.entity.prototype.update=function(b){if(b)for(var a in b)b.hasOwnProperty(a)&&this.hasOwnProperty(a)&&(this[a].update?this[a].update(b[a]):this[a]=b[a])};drupal.entity.prototype.getObject=function(){return{id:this.id}}})(jQuery);drupal=drupal||{};
(function(b){drupal.node=function(a,b){this.type=this.title="";this.uid=this.status=0;this.api=new drupal.node.api;drupal.entity.call(this,a,b)};drupal.node.prototype=new drupal.entity;drupal.node.prototype.constructor=drupal.node;drupal.node.prototype.update=function(a){drupal.entity.prototype.update.call(this,a);this.id=a.nid||this.id};drupal.node.prototype.getObject=function(){return b.extend(drupal.entity.prototype.getObject.call(this),{title:this.title,type:this.type,status:this.status,uid:this.uid})}})(jQuery);
drupal=drupal||{};drupal.node=drupal.node||{};(function(){drupal.node.api=function(){drupal.api.call(this);this.resource="node"};drupal.node.api.prototype=new drupal.api;drupal.node.api.prototype.constructor=drupal.node.api})(jQuery);drupal=drupal||{};
(function(b){drupal.user=function(a,b){this.pass=this.mail=this.name="";this.api=new drupal.user.api;drupal.entity.call(this,a,b)};drupal.user.prototype=new drupal.entity;drupal.user.prototype.constructor=drupal.user;drupal.user.prototype.update=function(a){drupal.entity.prototype.update.call(this,a);this.id=a.uid||this.id};drupal.user.prototype.getObject=function(){return b.extend(drupal.entity.prototype.getObject.call(this),{name:this.name,mail:this.mail,pass:this.pass})}})(jQuery);
drupal=drupal||{};drupal.user=drupal.user||{};(function(){drupal.user.api=function(){drupal.api.call(this);this.resource="user"};drupal.user.api.prototype=new drupal.api;drupal.user.api.prototype.constructor=drupal.user.api})(jQuery);
